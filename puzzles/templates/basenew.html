{% load i18n %}
{% load puzzle_tags %}
{% load humanize %}
{% load static %}

<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    {% block page-title %}
    <title>{{ hunt_title }}</title>
    {% endblock %}
    <meta name="viewport" content="width=device-width, initial-scale=0.5">
    <meta property="og:title" content="Brown Puzzlehunt">
    <meta property="og:description" content="{% blocktranslate with hunt=hunt_title%}Registration for this year's {{ hunt }} is now open!{% endblocktranslate %}">
    <meta property="og:image" content="{{ domain|slice:'-1' }}Brown Puzzlehunt">
    <meta property="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <!-- <link rel="stylesheet" href="{% static "css/skeleton.css" %}"> -->
    <!-- <link rel="stylesheet" href="{% static "css/basenew.css" %}"> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.formset/1.2.2/jquery.formset.min.js"></script>
    <script src="{% url 'javascript-catalog' %}"></script>
    <script src="{% static "js/sorttable.js" %}"></script>
    <script src="{% static "js/tray.js" %}"></script>
    <script src="{% static "js/notify.js" %}"></script>
    <script src="{% static "js/time.js" %}"></script>
    <link rel="icon" sizes="16x16 32x32 48x48 64x64" href="{% static "images/favicon.ico" %}" type="image/vnd.microsoft.icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    {{ ga_code|safe }}


    <style>      
      .bar1, .bar2, .bar3 {
        width: 35px;
        height: 5px;
        background-color: #333;
        margin: 6px 0;
        transition: 0.4s;
      }
      
      .change .bar1,.change .bar2,.change .bar3 {
        background-color: #3b7386;
      }

      .change .bar1 {
        transform: translate(0, 11px) rotate(-45deg);
      }
      .change .bar2 {opacity: 0;}
      .change .bar3 {
        transform: translate(0, -11px) rotate(45deg);
      }

      nav {
        position: fixed;
        top: 0;
        left: -250px; /* Adjust the width of the sidebar as needed */
        /* width: 250px; */
        height: 100%;
        
        overflow-x: hidden;
        transition: all 0.3s ease;
        z-index: 900;
      }
    
      nav .nav-content {
        padding: 16px; /* Add padding to the content inside the sidebar */
        color: white; /* Set text color inside the sidebar */
        display: block;
        background-color: #030911b8;
        background-image: url("https://www.transparenttextures.com/patterns/broken-noise.png");
        border-radius: 0px 10px 10px 0px;
      }

      nav a {
        display: block;
        text-decoration: none;
        /*color: grey;*/
      }

      nav * {
        font-size: x-large;
      }

      nav a:hover {
        background-color: #e9e9e90d;
        border-radius: 10px;
      }
    
      .sandwich {
        display: inline-block;
        cursor: pointer;
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 999;
      }
    
      .hidden-nav {
        left: 0;
        padding-top: 6.5rem;
      }
    
      </style>

  </head>
<body>
  <div class="sandwich" onclick="toggleSandwich(this)">
    <div class="bar1"></div>
    <div class="bar2"></div>
    <div class="bar3"></div>
  </div>

  <nav class="hidden-nav">
    <div class="user-actions nav-content">
      {% if request.user.is_authenticated %}
          {% if team %}
          <a class="team-name" href="{% url 'team' team.team_name %}">{{ request.user }}</a>
          {% else %}
          {{ request.user }}
          {% endif %}
          <a href="{% url 'logout' %}" class="btn">{% translate "Logout" %}</a>
          {% if team and hunt_has_started %}
          <span class="current-stat" title="Solves: {{ team.solves|length }}">
              {% include 'icon-solve.svg' %}
              <span class="current-stat-label">{{ team.solves|length }}</span>
          </span>
          {% endif %}
          {% if team and num_free_answers_remaining > 0 %}
          <span class="current-stat" title="{% translate 'Free answers:' %} {{ num_free_answers_remaining }}">
              {% include 'icon-answer.svg' %}
              <span class="current-stat-label">{{ num_free_answers_remaining }}</span>
          </span>
          {% endif %}
          {% if team and num_hints_remaining > 0 %}
          <span class="current-stat" title="{% translate 'Available hints:' %} {{ num_hints_remaining }}">
              {% include 'icon-hint.svg' %}
              <span class="current-stat-label">{{ num_hints_remaining }}</span>
          </span>
          {% endif %}
          {% if request.user.is_impersonate %}
          <span class="current-stat" title="{% translate 'Currently impersonating' %}">
              ({{ request.impersonator }}
              <a href="{% url 'impersonate-stop' %}">&#x1F6D1;</a>)
          </span>
          {% endif %}
          {% if is_superuser %}
          <label class="navbar-shortcuts" for="shortcuts" title="{% translate 'Admin toolbox' %}">
              {% if not hunt_is_prereleased %}&#x26A0;&#xFE0F;{% endif %}
              {% translate "Shortcuts" %}
          </label>
          {% if unclaimed_hints %}
          <a class="current-stat" title="{% translate 'Hints that need answering:' %} {{ unclaimed_hints }}" href="{% url 'hint-list' %}" style="color: red">
              {% include 'icon-hint.svg' %}
              <span class="current-stat-label">{{ unclaimed_hints }}</span>
          </a>
          {% endif %}
          {% endif %}
          
      {% elif not hunt_is_closed %}
        <a href="{% url 'register' %}" class="btn">{% translate "Register" %}</a>
        <a href="{% url 'login' %}" class="btn">{% translate "Login" %}</a>
      {% endif %}
      </div>

    <div class="tray nav-content">
        <div class="top-tabs">
            <a{% if request.path == '/' %} class="selected-tab site-title"{% endif %} href="{% url 'index' %}">
                <b>Home</b>
            </a>
            {% if hunt_has_started or hunt_has_almost_started %}
            <a{% if '/puzzle' in request.path or puzzle %} class="selected-tab"{% endif %} href="{% url 'puzzles' %}">
                {% translate "Puzzles" %}
            </a>
            {% endif %}
            {% if events_live %}
            <a{% if '/events' in request.path %} class="selected-tab"{% endif %} href="{% url 'events' %}">
                {% translate "Events" %}
            </a>
            {% endif %}
            {% if hunt_has_started and not hunt_is_closed %}
            <a{% if request.path == '/contact-hq' %} class="selected-tab"{% endif %} href="{% url 'contact-hq' %}">
                {% translate "Contact" %}
            </a>
            {% endif %}
            <a{% if '/team' in request.path %} class="selected-tab"{% endif %} href="{% url 'teams' %}">
                {% translate "Teams" %}
            </a>
            <a{% if request.path == '/rules' %} class="selected-tab"{% endif %} href="{% url 'rules' %}">
                {% translate "Rules" %}
            </a>
            {% if not hunt_is_closed %}
            <a{% if request.path == '/on-campus' %} class="selected-tab"{% endif %} href="{% url 'on_campus' %}">
                {% translate "On-Campus" %}
            </a>
            {% endif %}
            {% if wrapup_page_visible or is_admin %}
            <a{% if '/wrapup' in request.path %} class="selected-tab"{% endif %} href="{% url 'wrapup' %}">
                {% translate "Wrap-Up" %}
            </a>
            {% endif %}
            {% if hunt_is_closed %}
            <a{% if request.path == '/credits' %} class="selected-tab"{% endif %} href="{% url 'credits' %}">
                {% translate "Credits" %}
            </a>
            {% endif %}
            <a{% if request.path == '/club' %} class="selected-tab"{% endif %} href="{% url 'club' %}">
                {% translate "Club" %}
            </a>
        </div>
        <div class="top-left-actions">
            {% block top-left-actions %}{% endblock %}
        </div>
    </div>

    
  </nav>
  
  <script>
  var nav = document.querySelector('nav');
  nav.classList.toggle("hidden-nav");
  function toggleSandwich(x) {
    x.classList.toggle("change");
    var nav = document.querySelector('nav');
    console.log(nav)
    nav.classList.toggle("hidden-nav");
  }
  </script>
  <script>
    {% if team %}
        openSocket('/ws/team', showNotify);
    {% endif %}
    {% if messages %}
    {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
        toastr.error("{{ message|escapejs }}");
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
        toastr.warning("{{ message|escapejs }}");
        {% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
        toastr.success("{{ message|escapejs }}");
        {% else %}
        showNotify("{{ message|escapejs }}");
        {% endif %}
    {% endfor %}
    {% endif %}
  </script>
  


    <div class="content">
      {% block content %}{% endblock %}
    </div>
</body>
</html>
